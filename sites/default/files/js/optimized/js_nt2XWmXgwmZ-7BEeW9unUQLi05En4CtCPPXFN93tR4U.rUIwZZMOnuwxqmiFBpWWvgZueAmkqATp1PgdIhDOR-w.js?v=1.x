/* Source and licensing information for the line(s) below can be found at https://www.delmonte.com/modules/custom/location_finder/js/scripts.min.js. */
function initMap(){geocoder=new google.maps.Geocoder;var a={lat:37.09024,lng:-95.712891};map=new google.maps.Map(document.getElementById("lf-map"),{zoom:4,center:a,scrollwheel:!1,disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}}),infoBox=new google.maps.InfoWindow({pixelOffset:new google.maps.Size(0,64)}),""!==jQuery("form#map-search input").val()&&jQuery("form#map-search").trigger("submit",function(a){a.preventDefault(),submitHandler()})}function codeAddress(a){return new Promise(function(b,c){geocoder.geocode({address:a},function(a,d){"OK"==d?b(a[0].geometry.location):c(Error("Unable to geocode entered address."))})})}function getData(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open("GET","/api/get-stores/"+a+"/"+b+"?_format=json",!0),e.setRequestHeader("Authorization","Basic "+btoa("location_finder:9Nti0ReXT6c!sBeP")),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){200==e.status?c(e.response):d(Error(e.statusText))},e.onerror=function(){d(Error("Network Error"))},e.send()})}function toTitleCase(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}function bindClick(a){return function(){createInfoBox(contentStrings[a]),infoBox.close(),infoBox.open(map,markers[a])}}function createInfoBox(a){infoBox.setContent(a)}function clearMarkers(){setMapOnAll(null)}function setMapOnAll(a){for(var b=0;b<markers.length;b++)markers[b].setMap(a)}function updateUrlParameter(a,b,c){var d=new RegExp("("+b+"=)[^&]+");return a.replace(d,"$1"+c)}!function(a,b){function c(){var b=a("form#map-search input").val();if(history.pushState){var c=(window.location.search&&window.location.search,window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search),d=window.location.href.indexOf("zipcode")>-1?updateUrlParameter(c,"zipcode",b):window.location.search?c+"&zipcode="+b:"?zipcode="+b;window.history.pushState({path:d},"",d)}codeAddress(b).then(function(c){var d=c.lat(),e=c.lng();getData(d,e).then(function(c){clearMarkers();var f=JSON.parse(c),g={url:"/themes/delmonte/images/map_pin.svg",origin:new google.maps.Point(0,0),anchor:new google.maps.Point(32,64),size:new google.maps.Size(64,64)},h=Object.keys(f).length;if(h>0){var i="";a(".map-results").addClass("has-results");for(var j=0;j<h;j++){var k={lat:parseFloat(f[j].lat),lng:parseFloat(f[j].lng)};contentStrings[j]="<div class='location-on-map'><h3>"+toTitleCase(f[j].name)+"</h3><p class='address'>"+toTitleCase(f[j].address)+"</p><p class='distance'>"+f[j].distance+" miles<a target='_blank' href='https://www.google.com/maps/dir//"+encodeURI(f[j].address)+"' class='direction-link'>Directions</a></p></div>",markers[j]=new google.maps.Marker({map:map,position:k,icon:g}),markers[j].addListener("click",bindClick(j)),i+="<li><h3>"+toTitleCase(f[j].name)+"</h3><p class='address'>"+toTitleCase(f[j].address)+"</p><p class='distance'>"+f[j].distance+" miles</p><span class='view-on-map' data-on-map='"+j+"'>View on Map</span> <a target='_blank' href='https://www.google.com/maps/dir//"+encodeURI(f[j].address)+"' class='direction-link'>Directions</a></li>"}a("#search-near").html(b),a("#map-results").html(i),window.setTimeout(function(){google.maps.event.trigger(map,"resize"),map.setCenter({lat:d,lng:e}),map.setZoom(11)},100),a(".view-on-map").on("click",function(b){b.preventDefault();var c=a(this).data("on-map");createInfoBox(contentStrings[c]),infoBox.close(),infoBox.open(map,markers[c])})}})},function(b){clearMarkers(),window.setTimeout(function(){google.maps.event.trigger(map,"resize"),map.setCenter({lat:37.09024,lng:-95.712891}),map.setZoom(4)},400),a(".map-results").removeClass("has-results")})}a(document).ready(function(){a("form#map-search").on("submit",function(a){a.preventDefault(),c()})})}(jQuery,Drupal);var geocoder,map,currentLat,currentLong,markers=[],infoBox,contentStrings=[];
//# sourceMappingURL=scripts.min.js.map
/* Source and licensing information for the above line(s) can be found at https://www.delmonte.com/modules/custom/location_finder/js/scripts.min.js. */